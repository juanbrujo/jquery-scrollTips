/*
 *  jQuery scrollTips - v0.1
 *  
 *
 *  https://github.com/juanbrujo/jquery-scrollTips
 *
 *  By: Jorge Epu√±an |  @csslab
 *  License: MIT
 */
!function(a){a.scrollTips=function(b,c){var d={container:a("section"),title:a("h1"),exclude:a("#intro"),smoothscroll:500,onCreate:function(){},onSection:function(){}},e=this;e.settings={};var f=a(b),g=f;e.init=function(){e.settings=a.extend({},d,c);var b=[],f=function(c,d,f,g){Number.prototype.limit=function(a,b){return Math.min(Math.max(this,a),b)};var h=function(){var b=a(a(this).attr("href")).offset().top;return a("html, body").stop().animate({scrollTop:b},e.settings.smoothscroll),!1},i=function(){var c=d.first();c.css("margin-top",a(window).height()-g.height()-g.offset().top);for(var e=0;e<b.length;e++){var f=b[e];f.targetPos=f.target.offset().top}},j=function(){for(var c=a(window).height(),d=a(window).scrollTop(),f=0;f<b.length;f++){var g=b[f],h=g.target.height(),i=g.target;d+20>g.targetPos&&d<g.targetPos+h?g.tip.hasClass("activeTip")||("function"==typeof window.history.replaceState&&history.replaceState({},"",window.location.href.replace(/#.*$/,"")+"#"+g.name),g.tip.addClass("activeTip"),i.addClass("activeSection"),e.settings.onSection.call(this)):(g.tip.removeClass("activeTip"),i.removeClass("activeSection"));var j=((c-(d-g.targetPos)/h*c)/1.8).limit(30*(f+.3),c-30*(b.length-f+.3));g.tip.css("top",j)}d+20<b[0].targetPos&&document.location.href.match(/#.+$/)&&"function"==typeof window.history.replaceState&&history.replaceState({},"",window.location.href.replace(/#.*$/,""))};d.each(function(){var c=a(this),d=c.find("h1").text(),e=a("<a class='scrollTip'/>").attr("href","#"+this.id).text(d).click(h).appendTo("body");b.push({name:this.id,tip:e,target:a("#"+this.id),targetPos:0})}),a(window).on("load scroll resize",function(){i(),j()})},h=g,i=e.settings.container,j=e.settings.title,k=e.settings.exclude;f(h,i,j,k),e.settings.onCreate.call(this)},e.init()},a.fn.scrollTips=function(b){return this.each(function(){if(void 0===a(this).data("scrollTips")){var c=new a.scrollTips(this,b);a(this).data("scrollTips",c)}})}}(jQuery);